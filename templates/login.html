{% extends 'base.html' %}

{% block guest_content %}
<section class="auth-center">
  <form class="auth-card" method="post">
    <h2>ğŸ“ UUP</h2>
    <p class="muted">University Unified Portal - your campus, connected.</p>

    <label>Sign in as</label>
    <div class="role-picks" id="rolePicks">
      <label class="role-pick {% if selected_role == 'student' %}selected{% endif %}">
        <input type="radio" name="role" value="student" {% if selected_role == 'student' %}checked{% endif %} />
        <span>ğŸ§‘â€ğŸ“ Student</span>
      </label>
      <label class="role-pick {% if selected_role == 'professor' %}selected{% endif %}">
        <input type="radio" name="role" value="professor" {% if selected_role == 'professor' %}checked{% endif %} />
        <span>ğŸ‘¨â€ğŸ« Professor</span>
      </label>
      <label class="role-pick {% if selected_role == 'admin' %}selected{% endif %}">
        <input type="radio" name="role" value="admin" {% if selected_role == 'admin' %}checked{% endif %} />
        <span>ğŸ›¡ Admin</span>
      </label>
    </div>

    <label>University ID or Email</label>
    <input type="text" name="identifier" placeholder="University ID or email" required />

    <label>Password</label>
    <input type="password" name="password" required />

    <button class="btn" type="submit">Sign In</button>
    <p class="muted">Need an account? <a href="{{ url_for('register') }}">Register</a></p>
  </form>
</section>

<script>
  const roleContainer = document.getElementById('rolePicks');
  if (roleContainer) {
    const labels = roleContainer.querySelectorAll('.role-pick');
    const syncRoleHighlight = () => {
      labels.forEach((label) => {
        const input = label.querySelector('input[type="radio"]');
        label.classList.toggle('selected', !!(input && input.checked));
      });
    };
    labels.forEach((label) => {
      const input = label.querySelector('input[type="radio"]');
      if (input) input.addEventListener('change', syncRoleHighlight);
    });
    syncRoleHighlight();
  }
</script>
{% endblock %}
